# AI Assistant 使用指南

## 界面说明

### 主界面布局
```
┌─────────────────────────────────────────────────────────────┐
│ [☰] AI Assistant                                    [U]     │
├─────────────┬───────────────────────────────────────────────┤
│ 侧边栏      │ 聊天区域                                        │
│             │                                               │
│ [New Chat]  │ 欢迎界面 / 对话消息                            │
│             │                                               │
│ 对话历史    │                                               │
│ - 对话1     │                                               │
│ - 对话2     │                                               │
│ - 对话3     │                                               │
│             │                                               │
│             │ ┌─────────────────────────────────────────┐   │
│             │ │ 输入框 [📎] [🔗] [发送]                  │   │
│             │ └─────────────────────────────────────────┘   │
└─────────────┴───────────────────────────────────────────────┘
```

### 功能说明

#### 1. 基本对话
- 在输入框中输入问题
- 按 `Enter` 发送，`Shift + Enter` 换行
- AI会基于通义千问模型回答

#### 2. 文件上传分析
- 点击输入框右侧的 📎 图标
- 选择支持的文件：PDF、DOC、DOCX、TXT、MD
- 文件会被自动解析，AI基于文件内容回答
- 上传的文件会显示在输入框上方，可点击 ❌ 删除

#### 3. 网页内容分析
- 点击输入框右侧的 🔗 图标
- 输入要分析的网页URL
- AI会分析网页内容并基于内容回答
- 分析的网页会显示在输入框上方，可点击 ❌ 删除

#### 4. 网络搜索
- 当问题包含搜索关键词时自动触发
- 关键词：search、find、look up、what is、how to、where is
- 使用Tavily搜索获取最新信息

#### 5. 对话管理
- 左侧显示所有对话历史
- 点击"New Conversation"创建新对话
- 点击对话项切换对话
- 悬停显示删除按钮

### 意图标识

AI会根据当前模式显示不同的意图标识：

- 💬 **Chat**: 普通对话模式
- 🌐 **Web Analysis**: 基于网页内容分析
- 📄 **Document Analysis**: 基于文档内容分析

### 支持的文件类型

| 类型 | 扩展名 | 说明 |
|------|--------|------|
| PDF | .pdf | 使用pdf-parse解析 |
| Word | .doc, .docx | 使用mammoth解析 |
| 文本 | .txt | 直接读取 |
| Markdown | .md | 直接读取 |

### 快捷键

- `Enter`: 发送消息
- `Shift + Enter`: 换行
- `Ctrl + /`: 聚焦输入框

### 响应式设计

- 桌面端：侧边栏 + 主聊天区域
- 移动端：可隐藏侧边栏，聊天区域居中
- 支持触摸操作

## 技术特性

### 前端技术
- React 18 + TypeScript
- Tailwind CSS 样式
- 响应式设计
- Markdown 渲染
- 代码高亮
- 图标系统

### 后端技术
- Node.js + Express
- 文件上传处理
- 网页内容抓取
- AI模型集成
- 日志系统

### AI能力
- 通义千问对话模型
- Tavily网络搜索
- 文档内容理解
- 网页内容分析
- 多模态交互

## 故障排除

### 常见问题

1. **文件上传失败**
   - 检查文件大小（限制10MB）
   - 确认文件类型支持
   - 检查网络连接

2. **网页分析失败**
   - 确认URL可访问
   - 检查网页是否包含文本内容
   - 某些网站可能有反爬虫保护

3. **AI回答异常**
   - 检查API密钥配置
   - 查看控制台错误信息
   - 检查网络连接

4. **界面显示问题**
   - 清除浏览器缓存
   - 检查JavaScript控制台
   - 确认浏览器兼容性

### 日志查看

- 后端日志：`logs/combined.log`
- 错误日志：`logs/error.log`
- 控制台输出：开发环境

## 开发说明

### 本地开发
```bash
# 安装依赖
npm run install-all

# 启动开发服务器
npm run dev

# 或分别启动
npm run server  # 后端
npm run client  # 前端
```

### 生产部署
```bash
# 构建前端
cd client && npm run build

# 启动生产服务器
npm start
```

### 环境变量
确保正确配置以下环境变量：
- `DASHSCOPE_API_KEY`: 通义千问API密钥
- `TAVILY_API_KEY`: Tavily搜索API密钥
- `PORT`: 服务器端口（默认3001）
- `REACT_APP_API_URL`: 前端API地址


